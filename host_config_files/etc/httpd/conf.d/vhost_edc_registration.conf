<VirtualHost  *:80>
    ServerAdmin support@ceda.ac.uk

    ServerName edc-reg.ceda.ac.uk
    ServerAlias edc-reg1.ceda.ac.uk

#    DocumentRoot /var/www/edc_reg_site/htdocs

    ErrorLog  logs/edc_reg_error_log
    CustomLog logs/edc_reg_access_log common
    
#
#   The following statements are intended to ensure that access is
#   only possible to the required directories
#
    <directory />
           <RequireAll>
               Require all granted
          </RequireAll>
 
    </directory>
   
    <directory /usr/local/edc_registration/resources/>
 
          <RequireAll>
               Require all granted
          </RequireAll>
 
    </directory>

    Alias /static/ /usr/local/edc_registration/static/

    <directory /usr/local/edc_registration/static/>

         <RequireAll>
               Require all granted
          </RequireAll>
   
        options FollowSymLinks
        Options Indexes FollowSymLinks
    </directory>


    WSGIDaemonProcess edc-reg-site display-name=%{GROUP} user=apache group=apache  python-home=/usr/local/edc_registration/venv/ python-path=/usr/local/edc_registration/
    WSGIProcessGroup edc-reg-site
    WSGIScriptAlias / /usr/local/edc_registration/resources/wsgi.py

#
#   Make sure access to admin interface is restricted by ip address
#
    <location /admin>
           <RequireAny>
              Require ip  130.246.122.
              Require ip  130.246.123.
              Require ip  130.246.188.
              Require ip  130.246.120.
              Require ip 130.246.242.
              Require ip 130.246.149.
	      Require ip 130.246.148.
           </RequireAny>

    </location>

  
</VirtualHost>
